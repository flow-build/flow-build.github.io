(self.webpackChunkworkflow=self.webpackChunkworkflow||[]).push([[5819],{3905:function(e,n,r){"use strict";r.d(n,{Zo:function(){return l},kt:function(){return c}});var t=r(7294);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){a(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function i(e,n){if(null==e)return{};var r,t,a=function(e,n){if(null==e)return{};var r,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||(a[r]=e[r]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)r=o[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var u=t.createContext({}),d=function(e){var n=t.useContext(u),r=n;return e&&(r="function"==typeof e?e(n):s(s({},n),e)),r},l=function(e){var n=d(e.components);return t.createElement(u.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,l=i(e,["components","mdxType","originalType","parentName"]),m=d(r),c=a,f=m["".concat(u,".").concat(c)]||m[c]||p[c]||o;return r?t.createElement(f,s(s({ref:n},l),{},{components:r})):t.createElement(f,s({ref:n},l))}));function c(e,n){var r=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=r.length,s=new Array(o);s[0]=m;var i={};for(var u in n)hasOwnProperty.call(n,u)&&(i[u]=n[u]);i.originalType=e,i.mdxType="string"==typeof e?e:a,s[1]=i;for(var d=2;d<o;d++)s[d]=r[d];return t.createElement.apply(null,s)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},6637:function(e,n,r){"use strict";r.r(n),r.d(n,{frontMatter:function(){return i},metadata:function(){return u},toc:function(){return d},default:function(){return p}});var t=r(2122),a=r(9756),o=(r(7294),r(3905)),s=["components"],i={},u={unversionedId:"resources/examples/pedidoReembolso",id:"resources/examples/pedidoReembolso",isDocsHomePage:!1,title:"Pedir reembolso",description:"Diagrama",source:"@site/docs/resources/examples/pedidoReembolso.md",sourceDirName:"resources/examples",slug:"/resources/examples/pedidoReembolso",permalink:"/docs/resources/examples/pedidoReembolso",editUrl:"https://bitbucket.org/fdtedsd/workflow-api-doc/src/master/docs/resources/examples/pedidoReembolso.md",version:"current",frontMatter:{},sidebar:"resourcesSidebar",previous:{title:"Escrever um cap\xedtulo",permalink:"/docs/resources/examples/escreverCapitulo"},next:{title:"Refer\xeancias",permalink:"/docs/resources/references"}},d=[{value:"Diagrama",id:"diagrama",children:[]},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",children:[]}],l={toc:d};function p(e){var n=e.components,i=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,t.Z)({},l,i,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"diagrama"},"Diagrama"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"pedido-reembolso",src:r(9147).Z})),(0,o.kt)("h2",{id:"descri\xe7\xe3o"},"Descri\xe7\xe3o"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 0: O processo sempre \xe9 iniciado num ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"n\xf3")," do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/startNode"},"Start"),".\nNesse caso, n\xe3o h\xe1 um ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metro")," pr\xe9-definido.")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 1: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task")," que representa\no ato de enviar o pedido de reembolso. Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metro"),'\numa a\xe7\xe3o ("action").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 2: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"System Task")," e da\ncategoria ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"HTTP"),". Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metro"),'\nO "status" do pedido, o valor ("amount"), quem solicitou ("requester") e coment\xe1rios ("comments"). Por ser\nda categoria HTTP, conta como uma requisi\xe7\xe3o ("request"), que possui uma "url", um "verb" - que \xe9 o m\xe9todo\nda solicita\xe7\xe3o - e "headers".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 3: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task")," que repsenta o ato\nde aprovar o pedido. Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),' uma a\xe7\xe3o ("action"),\no "status", o valor ("amount"), quem solicitou ("requester") e coment\xe1rios ("comments").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 4: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/flowNode"},"Flow Node"),' que ir\xe1 checar se o pedido\nfoi aprovado. Por padr\xe3o ("default"), o objeto "next" ir\xe1 enviar o processo para o n\xf3 3.\nCaso o pedido tenha sido aprovado ("APPROVED"), seguir\xe1 para o n\xf3 5. Se for negado ("DECLINED"),\nir\xe1 para o n\xf3 E1. Tem como ',(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metro"),' uma chave ("key").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 5: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"System Task")," e da\ncategoria ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"HTTP"),". Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),' um\n"status" e uma requisi\xe7\xe3o ("request") com "url", m\xe9todo ("verb") e "headers".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 6: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task")," que representa o\nato de revisar o pedido. Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),' uma a\xe7\xe3o ("action"),\num "status", um valor ("amount"), quem solicitou ("requester") e coment\xe1rios ("comments").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 7: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/flowNode"},"Flow Node"),' que ir\xe1 checar se o pedido\nfoi aceito. Por padr\xe3o, o objeto "next" voltar\xe1 para o n\xf3 6. Caso tenha sido revisado ("REVIEWED"),\nseguir\xe1 para o n\xf3 8. Caso tenha sido negado, ir\xe1 para o n\xf3 E1. Tem como ',(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metro"),'\numa chave ("key").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 8: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task"),' que representa o\nato de realizar o dep\xf3sito. Tem como par\xe2metro uma a\xe7\xe3o ("action").')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 9: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"System Task")," e da\ncategoria ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"HTTP"),". Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),'\num "status", uma requisi\xe7\xe3o ("request") com "url", m\xe9todo ("verb") e com "headers".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 10: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task")," que representa\no ato de avisar o requisitante. Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),' uma\na\xe7\xe3o ("action"), e um "status".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 11: N\xf3 final do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/finishNode"},"Finish Node"),'. Nesse n\xf3, a chave "next"\nsempre receber\xe1 um valor "null". O processo s\xf3 chegar\xe1 aqui caso o reembolso tenha sido aprovado.')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 E1: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"System Task")," e da\ncategoria ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/systemTaskNode"},"HTTP"),". Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),'\numa requisi\xe7\xe3o ("request") com "url", m\xe9todo ("verb") e "headers", e um "status".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"N\xf3 E2: N\xf3 do tipo ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/nodes/userTaskNode"},"User Task")," que representa\no ato de avisar o requisitante. Tem como ",(0,o.kt)("a",{parentName:"li",href:"/docs/resources/blueprints"},"par\xe2metros"),'\numa a\xe7\xe3o ("action") e um "status".')),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"N\xf3 E3: N\xf3 final do tipo ",(0,o.kt)("a",{parentName:"p",href:"/docs/resources/nodes/finishNode"},"Finish Node"),'. Nesse n\xf3, a chave "next"\nsempre receber\xe1 um valor "null". O processo s\xf3 chegar\xe1 aqui caso o reembolso tenha sido negado.'),(0,o.kt)("h2",{parentName:"li",id:"blueprint"},"Blueprint"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "example_pedido_reembolso",\n  "description": "",\n  "blueprint_spec": {\n    "environment": {},\n    "require": ["core"],\n    "prepare": [],\n    "lanes": [\n      {\n        "id": "usuario",\n        "name": "qualquer usuario",\n        "rule": ["fn", ["&", "args"], true]\n      },\n      {\n        "id": "gestor",\n        "name": "somente para gestores",\n        "rule": ["fn", ["&", "args"], true]\n      },\n      {\n        "id": "financeiro",\n        "name": "somente depto financeiro",\n        "rule": ["fn", ["&", "args"], true]\n      }\n    ],\n    "nodes": [\n        {\n            "id": "0",\n            "name": "Iniciar Pedido",\n            "next": "1",\n            "type": "start",\n            "lane_id": "usuario",\n            "parameters": {\n              "input_schema": {}\n            }\n        },\n        {\n            "id": "1",\n            "name": "Enviar pedido",\n            "next": "2",\n            "type": "userTask",\n            "lane_id": "usuario",\n            "parameters": {\n                "action": "DO_REQUEST",\n                "input": {}\n            }\n        },\n        {\n            "id": "2",\n            "name": "Cadastrar pedido",\n            "next": "3",\n            "type": "systemTask",\n            "category": "http",\n            "lane_id": "free",\n            "parameters": {\n              "request": {\n                "url": "url",\n                "verb": "POST",\n                "headers": {\n                  "ContentType": "application/json"\n                }\n              },\n              "input": {\n                "status": "pending",\n                "amount": { "$ref": "result.activities[0].data.amount" },\n                "requester": { "$ref": "result.activities[0].data.requester"},\n                "comments": { "$ref": "result.activities[0].data.comments" }\n              }\n            }\n        },\n        {\n            "id": "3",\n            "name": "Aprovar pedido",\n            "next": "4",\n            "type": "userTask",\n            "lane_id": "gestor",\n            "parameters": {\n                "action": "APPROVE_REQUEST",\n                "input": {\n                  "status": { "$ref": "result.data.status" },\n                  "amount": { "$ref": "result.data.amount" },\n                  "requester": { "$ref": "result.data.requester"},\n                  "comments": { "$ref": "result.data.comments" }\n                }\n            }\n        },\n        {\n          "id": "4",\n          "name": "Pedido aprovado?",\n          "next": {\n            "APPROVED": "5",\n            "DECLINED": "E1",\n            "default": "3"\n          },\n          "type": "flow",\n          "lane_id": "gestor",\n          "parameters": {\n            "input": {\n              "key": { "$ref": "result.activitites[0].data.status" }\n            }\n          }\n        },\n        {\n            "id": "5",\n            "name": "Confirmar pedido",\n            "next": "6",\n            "type": "systemTask",\n            "category": "http",\n            "lane_id": "gestor",\n            "parameters": {\n              "request": {\n                "url": "url",\n                "verb": "PUT",\n                "headers": {\n                  "ContentType": "application/json"\n                }\n              },\n              "input": {\n                "status": "APPROVED"\n              }\n            }\n        },\n        {\n            "id": "6",\n            "name": "Revisar pedido",\n            "next": "7",\n            "type": "userTask",\n            "lane_id": "financeiro",\n            "parameters": {\n                "action": "REVIEW_REQUEST",\n                "input": {\n                  "status": { "$ref": "result.data.status" },\n                  "amount": { "$ref": "result.data.amount" },\n                  "requester": { "$ref": "result.data.requester"},\n                  "comments": { "$ref": "result.data.comments" }\n                }\n            }\n        },\n        {\n          "id": "7",\n          "name": "Pedido aceito?",\n          "next": {\n            "REVIEWED": "8",\n            "DECLINED": "E1",\n            "default": "6"\n          },\n          "type": "flow",\n          "lane_id": "financeiro",\n          "parameters": {\n            "input": {\n              "key": { "$ref": "result.activitites[0].data.status" }\n            }\n          }\n        },\n        {\n            "id": "8",\n            "name": "Realizar dep\xf3sito",\n            "next": "9",\n            "type": "userTask",\n            "lane_id": "financeiro",\n            "parameters": {\n                "action": "DO_TRANSFER",\n                "input": {}\n            }\n        },\n        {\n            "id": "9",\n            "name": "Realizar dep\xf3sito",\n            "next": "10",\n            "type": "systemTask",\n            "category": "http",\n            "lane_id": "financeiro",\n            "parameters": {\n              "request": {\n                "url": "url",\n                "verb": "PUT",\n                "headers": {\n                  "ContentType": "application/json"\n                }\n              },\n              "input": {\n                "status": "SETTLED"\n              }\n            }\n        },\n        {\n          "id": "10",\n          "name": "Avisar requisitante",\n          "next": "11",\n          "type": "userTask",\n          "lane_id": "free",\n          "parameters": {\n            "action": "NOTIFY_USER",\n            "input": {\n              "status": { "$ref": "result.data.status" }\n            }\n          }\n        },\n        {\n          "id": "11",\n          "name": "Fim do pedido",\n          "type": "Finish",\n          "lane_id": "free",\n          "next": null\n        },\n        {\n            "id": "E1",\n            "name": "Atualizar pedido",\n            "next": "E2",\n            "type": "systemTask",\n            "category": "http",\n            "lane_id": "free",\n            "parameters": {\n              "request": {\n                "url": "url",\n                "verb": "PUT",\n                "headers": {\n                  "ContentType": "application/json"\n                }\n              },\n              "input": {\n                "status": "DECLINED"\n              }\n            }\n        },\n        {\n          "id": "E2",\n          "name": "Avisar requisitante",\n          "next": "E3",\n          "type": "userTask",\n          "lane_id": "free",\n          "parameters": {\n            "action": "NOTIFY_USER",\n            "input": {\n              "status": { "$ref": "result.data.status" }\n            }\n          }\n        },\n        {\n          "id": "E3",\n          "name": "Fim do pedido - recusado",\n          "type": "Finish",\n          "lane_id": "free",\n          "next": null\n        }       \n    ]\n  }\n}\n')))}p.isMDXComponent=!0},9147:function(e,n,r){"use strict";n.Z=r.p+"assets/images/pedido-reembolso-9e4d3dc01f9d73f6b11d90c1c79c1df1.png"}}]);