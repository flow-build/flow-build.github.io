(self.webpackChunkworkflow=self.webpackChunkworkflow||[]).push([[4478],{3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return c},kt:function(){return m}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),l=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,p=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=l(t),m=a,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||i;return t?r.createElement(f,s(s({ref:n},c),{},{components:t})):r.createElement(f,s({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,s=new Array(i);s[0]=d;var o={};for(var p in n)hasOwnProperty.call(n,p)&&(o[p]=n[p]);o.originalType=e,o.mdxType="string"==typeof e?e:a,s[1]=o;for(var l=2;l<i;l++)s[l]=t[l];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},6968:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return o},metadata:function(){return p},toc:function(){return l},default:function(){return u}});var r=t(2122),a=t(9756),i=(t(7294),t(3905)),s=["components"],o={},p={unversionedId:"resources/examples/pizzaV2",id:"resources/examples/pizzaV2",isDocsHomePage:!1,title:"Pizza v2",description:"Diagrama",source:"@site/docs/resources/examples/pizzaV2.md",sourceDirName:"resources/examples",slug:"/resources/examples/pizzaV2",permalink:"/docs/resources/examples/pizzaV2",editUrl:"https://bitbucket.org/fdtedsd/workflow-api-doc/src/master/docs/resources/examples/pizzaV2.md",version:"current",frontMatter:{},sidebar:"resourcesSidebar",previous:{title:"Pizza v1",permalink:"/docs/resources/examples/pizzaV1"},next:{title:"Pizza v3",permalink:"/docs/resources/examples/pizzaV3"}},l=[{value:"Diagrama",id:"diagrama",children:[]},{value:"Descri\xe7\xe3o",id:"descri\xe7\xe3o",children:[]},{value:"Blueprint",id:"blueprint",children:[]}],c={toc:l};function u(e){var n=e.components,o=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},c,o,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"diagrama"},"Diagrama"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"pizza-2",src:t(4727).Z})),(0,i.kt)("h2",{id:"descri\xe7\xe3o"},"Descri\xe7\xe3o"),(0,i.kt)("p",null,"Esta segunda vers\xe3o j\xe1 apresenta tarefas de usu\xe1rio e a apresenta\xe7\xe3o de diferentes lanes."),(0,i.kt)("p",null,"O processo pode ser iniciado por clientes, por\xe9m sua continuidade depende de uma intera\xe7\xe3o por parte de um ator representando um restaurante."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"N\xf3 1 (Start Node): Iniciar o processo"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 2 (User Task): Realizar o pedido da pizza"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 3 (System Task): Receber o pedido"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 4 (System Task): Salvar os dados do pedido"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 5 (User Task): Preparar o pedido da pizza"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 6 (System Task): Atualizar o pedido"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 7 (User Task): Receber Pizza"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 8 (Flow Node): Verificar Pizza"),(0,i.kt)("li",{parentName:"ul"},"Se a pizza est\xe1 ok: N\xf3 10 (System Task): Elogiar"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 10A (Finish Node): Finalizar Processo (com elogio)"),(0,i.kt)("li",{parentName:"ul"},"Se a pizza n\xe3o est\xe1 ok: N\xf3 9 (System Task): Reclamar"),(0,i.kt)("li",{parentName:"ul"},"N\xf3 9A: (System Task): Finalizar Processo (com reclama\xe7\xe3o)")),(0,i.kt)("h2",{id:"blueprint"},"Blueprint"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="pizzaV2.json"',title:'"pizzaV2.json"'},'{\n  "name": "pizza2",\n  "description": "pizza 2 example, system and userTasks",\n  "blueprint_spec": {\n    "requirements": ["core"],\n    "prepare": [],\n    "nodes": [\n      {\n        "id": "1",\n        "type": "Start",\n        "name": "Start Pizza 2 WF",\n        "next": "2",\n        "parameters": {\n          "input_schema": {}\n        },\n        "lane_id": "1"\n      },\n      {\n        "id": "2",\n        "type": "UserTask",\n        "name": "Order Pizza",\n        "next": "3",\n        "lane_id": "1",\n        "parameters": {\n          "action": "ORDER_PIZZA",\n          "input": {}\n          "activity_schema": { \n            "type": "object",\n            "properties": {\n              "qty": { "type": "integer" }.\n              "flavors": { \n                "type": "array", \n                "items": { "type": "string" }\n              },\n              "comments": { "type": "string" }\n            }\n            "required": ["qty","flavors"]\n          }\n        }\n      },\n      {\n        "id": "3",\n        "type": "SystemTask",\n        "name": "Take the order",\n        "category": "HTTP",\n        "next": "4",\n        "lane_id": "1",\n        "parameters": {\n          "input": {\n            "status": "pending",\n            "qty": {\n              "$ref": "result.activities[0].data.qty"\n            },\n            "flavors": {\n              "$ref": "result.activities[0].data.flavors"\n            },\n            "comments": {\n              "$ref": "result.activities[0].data.comments"\n            }\n          },\n          "request": {\n            "url": "https://5faabe16b5c645001602b152.mockapi.io/order",\n            "verb": "POST",\n            "headers": {\n              "ContentType": "application/json"\n            }\n          }\n        }\n      },\n      {\n        "id": "4",\n        "type": "SystemTask",\n        "category": "SetToBag",\n        "name": "Save Order",\n        "next": "5",\n        "lane_id": "1",\n        "parameters": {\n          "input": {\n            "order": {\n              "$ref": "result.data"\n            }\n          }\n        }\n      },\n      {\n        "id": "5",\n        "type": "UserTask",\n        "name": "Prepare Pizza",\n        "next": "6",\n        "lane_id": "2",\n        "parameters": {\n          "input": {\n            "order": {\n              "$ref": "bag.order"\n            }\n          },\n          "action": "PREPARE_PIZZA"\n        }\n      },\n      {\n        "id": "6",\n        "type": "SystemTask",\n        "category": "HTTP",\n        "name": "Update Order",\n        "next": "7",\n        "lane_id": "2",\n        "parameters": {\n          "input": {\n            "status": "done"\n          },\n          "request": {\n            "url": {\n              "$mustache": "https://5faabe16b5c645001602b152.mockapi.io/order/{{bag.order.id}}"\n            },\n            "verb": "PUT",\n            "headers": {\n              "ContentType": "application/json"\n            }\n          }\n        }\n      },\n      {\n        "id": "7",\n        "type": "UserTask",\n        "name": "Receive Pizza",\n        "next": "8",\n        "lane_id": "3",\n        "parameters": {\n          "action": "RECEIVE_PIZZA",\n          "input": {},\n          "activity_schema": {\n            "type": "object",\n            "properties": { \n              "is_order_ok": { \n                "type": "string", "enum": ["yes","no"]\n              }\n            }\n          }\n        }\n      },\n      {\n        "id": "8",\n        "type": "Flow",\n        "name": "Pizza ok?",\n        "next": {\n          "yes": "10",\n          "no": "9",\n          "default": "10"\n        },\n        "lane_id": "3",\n        "parameters": {\n          "input": {\n            "ok": {\n              "$ref": "result.activitites[0].data.is_order_ok"\n            }\n          }\n        }\n      },\n      {\n        "id": "9",\n        "type": "SystemTask",\n        "category": "HTTP",\n        "name": "Complaim",\n        "next": "9A",\n        "lane_id": "3",\n        "parameters": {\n          "input": {\n            "status": "complaim"\n          },\n          "request": {\n            "url": {\n              "$mustache": "https://5faabe16b5c645001602b152.mockapi.io/order/{{bag.order.id}}"\n            },\n            "verb": "PUT",\n            "headers": {\n              "ContentType": "application/json"\n            }\n          }\n        }\n      },\n      {\n        "id": "10",\n        "type": "SystemTask",\n        "category": "HTTP",\n        "name": "Praise",\n        "next": "10A",\n        "lane_id": "3",\n        "parameters": {\n          "input": {\n            "status": "praise"\n          },\n          "request": {\n            "url": {\n              "$mustache": "https://5faabe16b5c645001602b152.mockapi.io/order/{{bag.order.id}}"\n            },\n            "verb": "PUT",\n            "headers": {\n              "ContentType": "application/json"\n            }\n          }\n        }\n      },\n      {\n        "id": "9A",\n        "type": "Finish",\n        "name": "Finish Complaim",\n        "next": null,\n        "lane_id": "3"\n      },\n      {\n        "id": "10A",\n        "type": "Finish",\n        "name": "Finish Praise",\n        "next": null,\n        "lane_id": "3"\n      }\n    ],\n    "lanes": [\n      {\n        "id": "1",\n        "name": "free lane",\n        "rule": ["fn", ["&", "args"], true]\n      },\n      {\n        "id": "2",\n        "name": "restaurant lane",\n        "rule": [\n          "fn",\n          ["actor_data", "bag"],\n          [\n            "eval",\n            [\n              "apply",\n              "or",\n              [\n                "map",\n                ["fn", ["v"], ["=", "v", ["`", "restaurant"]]],\n                ["get", "actor_data", ["`", "claims"]]\n              ]\n            ]\n          ]\n        ]\n      },\n      {\n        "id": "3",\n        "name": "user lane",\n        "rule": [\n          "fn",\n          ["actor_data", "bag"],\n          [\n            "eval",\n            [\n              "apply",\n              "or",\n              [\n                "map",\n                ["fn", ["v"], ["=", "v", ["`", "user"]]],\n                ["get", "actor_data", ["`", "claims"]]\n              ]\n            ]\n          ]\n        ]\n      }\n    ],\n    "environment": {}\n  }\n}\n')))}u.isMDXComponent=!0},4727:function(e,n,t){"use strict";n.Z=t.p+"assets/images/pizza-2-66df744a6f00b3b38cc10c8346baf59f.png"}}]);